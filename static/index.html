<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MultiREFAGE ‚Äì Age Estimation</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white min-h-screen flex flex-col items-center justify-between px-4 py-6 text-gray-800">

  <!-- –õ–û–ì–û–¢–ò–ü –í–í–ï–†–•–£ -->
  <img src="/static/logo_multiref.png" alt="MultiREFAGE Logo" class="h-16 mb-4">

  <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
  <div class="max-w-2xl w-full p-8 rounded-2xl shadow-xl border border-gray-200">

    <!-- –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –Ø–ó–´–ö–ê -->
    <div class="flex justify-end mb-2 text-sm">
      <button onclick="setLang('en')" class="mr-2 hover:underline text-blue-700">EN</button>
      <button onclick="setLang('ru')" class="hover:underline text-blue-700">RU</button>
    </div>

    <!-- –ó–ê–ì–û–õ–û–í–û–ö -->
    <h1 class="text-3xl font-bold text-center mb-4" data-en="Age Estimation by Suture Obliteration" data-ru="–û—Ü–µ–Ω–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ —Å—Ç–µ–ø–µ–Ω–∏ –æ–±–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ —à–≤–æ–≤">
      Age Estimation by Suture Obliteration
    </h1>

    <!-- –û–ü–ò–°–ê–ù–ò–ï -->
    <p class="text-center mb-4 text-sm" data-en="MultiREFAGE is an application for estimating the age of unidentified skulls using regression modeling (Random Forest Regressor). Age is estimated based on the degree of suture obliteration (Meindl, Lovejoy, 1985), taking into account the preliminary age estimate, which is used to select a reference group for model training."
       data-ru="MultiREFAGE ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ —á–µ—Ä–µ–ø—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (Random Forest Regressor). –í–æ–∑—Ä–∞—Å—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ —Å—Ç–µ–ø–µ–Ω–∏ –æ–±–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ —à–≤–æ–≤ —á–µ—Ä–µ–ø–∞ (Meindl, Lovejoy, 1985) —Å —É—á–µ—Ç–æ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π –æ—Ü–µ–Ω–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–±–æ—Ä–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–æ–π —Å–µ—Ä–∏–∏, –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–π –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏.">
      MultiREFAGE is an application for estimating the age...
    </p>

    <p class="text-center text-sm text-gray-500 mb-6" data-en='Method details are available <a href="/static/text.pdf" target="_blank" class="text-blue-600 underline">here</a>.'
       data-ru='–û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–æ–¥–µ–ª–∏ SVR –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ <a href="/static/text.pdf" target="_blank" class="text-blue-600 underline">–ø–æ —Å—Å—ã–ª–∫–µ</a>.'>
      A description of the method using the SVR model as an example is available in the publication (in Russian) <a href="/static/text.pdf" target="_blank" class="text-blue-600 underline">here</a>.
    </p>

    <!-- –°–°–´–õ–ö–ê –ù–ê –ü–†–ò–ú–ï–† -->
    <div class="mb-4 text-center">
      <a href="/static/example.xlsx" download class="text-blue-600 hover:underline text-sm" data-en="üìÑ Download example file (example.xlsx)" data-ru="üìÑ –°–∫–∞—á–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ (example.xlsx)">
        üìÑ Download example file (example.xlsx)
      </a>
    </div>

    <!-- –§–û–†–ú–ê –ó–ê–ì–†–£–ó–ö–ò -->
    <form id="upload-form" class="flex flex-col gap-4 items-center">
      <input type="file" id="file-input" accept=".xlsx"
        class="block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
               file:rounded-full file:border-0 file:text-sm file:font-semibold
               file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" required />

      <button type="submit"
        class="bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 transition text-sm"
        data-en="Upload and Predict" data-ru="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å">
        Upload and Predict
      </button>
    </form>

    <p id="status" class="mt-4 text-center text-sm text-gray-600"></p>
  </div>




 
 <!-- –ü–û–î–í–ê–õ -->
  <footer class="text-center text-xs text-gray-500 mt-6 flex flex-col items-center">
<p data-en="This application was developed with support from the Russian Science Foundation (Project ‚Ññ24-28-01050 ‚ÄúSearching for effective methods for sex and age estimation by skull‚Äù)."
       data-ru="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –†–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –ù–∞—É—á–Ω–æ–≥–æ –§–æ–Ω–¥–∞ (–ü—Ä–æ–µ–∫—Ç ‚Ññ24-28-01050 ¬´–í –ø–æ–∏—Å–∫–∞—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ—Ü–µ–Ω–∫–∏ –ø–æ–ª–∞ –∏ –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ —á–µ—Ä–µ–ø—É¬ª).">
      This application was developed with support from the Russian Science Foundation...
    </p>
    <img src="/static/rsf.png" alt="RSF Logo" class="h-10 mt-2">
  </footer>

  <!-- –Ø–ó–´–ö–û–í–û–ô –°–ö–†–ò–ü–¢ -->
  <script>
    function setLang(lang) {
      document.querySelectorAll('[data-en]').forEach(el => {
        el.innerHTML = el.getAttribute('data-' + lang);
      });
    }

    const form = document.getElementById('upload-form');
    const fileInput = document.getElementById('file-input');
    const status = document.getElementById('status');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      status.textContent = "Processing your file...";

      const file = fileInput.files[0];
      if (!file) return;

      const formData = new FormData();
      formData.append('file', file);

      try {
        const response = await fetch('/predict/', {
          method: 'POST',
          body: formData
        });

        if (!response.ok) throw new Error("Prediction failed.");

        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = "predictions.xlsx";
        document.body.appendChild(a);
        a.click();
        a.remove();
        status.textContent = "Success! Your results are ready.";
      } catch (err) {
        console.error(err);
        status.textContent = "An error occurred while processing your file.";
      }
    });

    // –£—Å—Ç–∞–Ω–æ–≤–∏–º —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    setLang('en');
  </script>
</body>
</html>
